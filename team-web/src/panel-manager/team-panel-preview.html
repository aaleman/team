<dom-module id="team-panel-preview">
    <style is="custom-style" include="iron-flex iron-flex-reverse iron-flex-alignment iron-flex-factors iron-positioning">
        :host {
            display: block;
            position: relative;
            box-sizing: border-box;
            width: 600px;
            height: 100%;
        }

        stv-table {
            min-height: 300px;
            height: 100%;
        }

        .data {
            color: #666;
        }

        stv-table::shadow {
            font-size: 11px;
        }

        stv-table::shadow .table-pager > input {
            width: 40px !important;
        }

        stv-tab {
            min-height: 300px;
            height: calc(100% - 100px);
        }

        .information {
            box-sizing: border-box;
            padding: 10px;
            height: 100px;
        }
    </style>
    <template>
        <div class="information">
            <span class="data">Name:</span> &nbsp; {{namePanel}}
            <br>
            <span class="data">Author:</span> &nbsp; {{author}}
            <br>
            <span class="data">Version:</span> &nbsp; {{vers}}
            <br>
            <span class="data">Description:</span> &nbsp; {{desc}}
        </div>

        <stv-tab>
            <div class="tabContainer" data-tab="diseases">
                <stv-table id="diseaseTable" columns="{{diseaseColumns}}" enable-paging hide-column-selector></stv-table>
            </div>
            <div class="tabContainer" data-tab="genes">
                <stv-table id="geneTable" columns="{{geneColumns}}" enable-paging hide-column-selector> </stv-table>
            </div>
            <div class="tabContainer" data-tab="mutations">
                <stv-table id="mutationTable" columns="{{mutationColumns}}" enable-paging hide-column-selector></stv-table>
            </div>
        </stv-tab>

    </template>

    <script>
        Polymer({
            is: "team-panel-preview",
            properties: {
                option: {
                    type: String,
                    value: 'diseases'
                },
                diseases: {
                    type: Array,
                },
                genes: {
                    type: Array,
                },
                mutations: {
                    type: Array,
                },
                selectedPanel: {
                    type: Object,
                    value: function() {
                        return {};
                    },
                    observer: 'selectedPanelChanged'
                },

            },
            ready: function() {
                this.geneColumns = [{
                    name: 'name',
                    title: 'Name',
                    width: 200
                }, {
                    name: 'chr',
                    title: 'Chr',
                    defaultValue: '.',
                    width: 120
                }, {
                    name: 'start',
                    title: 'Start',
                    defaultValue: '.',
                    width: 160
                }, {
                    name: 'end',
                    title: 'End',
                    defaultValue: '.',
                    width: 160
                }];
                this.mutationColumns = [{
                    name: 'chr',
                    title: 'Chr',
                    width: 70
                }, {
                    name: 'pos',
                    title: 'Pos',
                    width: 100
                }, {
                    name: 'ref',
                    title: 'Ref',
                    width: 85
                }, {
                    name: 'alt',
                    title: 'Alt',
                    width: 85
                }, {
                    name: 'phe',
                    title: 'Phenotype',
                    width: 200
                }, {
                    name: 'src',
                    title: 'Source',
                    width: 100
                }];
                this.diseaseColumns = [{
                    name: 'phenotype',
                    title: 'Phenotype',
                    type: 'text',
                    width: 400
                }, {
                    name: 'source',
                    title: 'Source',
                    type: 'select',
                    options: ["clinvar", "gwas"],
                    width: 240
                }];

            },
            selectedPanelChanged: function(neo, old) {
                if (Object.keys(neo).length > 0) {
                    this.namePanel = this.selectedPanel.name;
                    this.vers = this.selectedPanel.version;
                    this.author = this.selectedPanel.author;
                    this.desc = this.selectedPanel.description;
                    this.diseases = neo.diseases;
                    this.genes = neo.genes;
                    this.mutations = neo.mutations;
                    this.refreshTables();
                } else {
                    this.namePanel = "";
                    this.vers = "";
                    this.author = "";
                    this.desc = "";
                    this.diseases = "";
                    this.genes = "";
                    this.mutations = "";
                }
            },
            refreshTables: function() {
                this.$.diseaseTable.set("data", this.diseases);
                this.$.geneTable.set("data", this.genes);
                this.$.mutationTable.set("data", this.mutations);
            }
        })
    </script>
</dom-module>
